<div class="max-w-[1400px] mx-auto px-6 lg:px-10 py-8 bg-white">
  <div
    class="relative w-full h-[450px] mb-10 rounded-2xl overflow-hidden border border-gray-300 shadow-lg"
  >
    <img
      src="https://template.canva.com/EAF78r-IsmY/1/0/1600w-3qrgmLc9_pg.jpg"
      alt="Shop Banner"
      class="w-full h-full object-cover"
    />
  </div>
  <div class="flex flex-col items-center text-center mb-16">
    <h1 class="text-2xl md:text-3xl font-bold text-gray-900 mt-3">Explore Our Collection</h1>
    <div class="flex justify-center mt-6 w-full">
      <div class="relative w-full max-w-3xl">
        <lucide-icon
          [img]="Search"
          class="absolute left-2 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"
        ></lucide-icon>

        <input
          type="text"
          placeholder="Search products, brands, categories..."
          [(ngModel)]="searchText"
          (input)="onSearch()"
          class="w-full pl-12 pr-4 py-3 rounded-full bg-white border text-sm focus:outline-none focus:ring-2 focus:ring-black transition"
        />
      </div>
    </div>
  </div>
  <div class="flex flex-col gap-6 mb-4">
    <div class="flex gap-8 border-b border-gray-200">
      <button
        *ngFor="let category of categories"
        (click)="onCategorySelected(category)"
        class="pb-4 text-lg font-medium transition relative"
        [class.text-black]="selectedCategory === category"
        [class.text-gray-500]="selectedCategory !== category"
      >
        {{ category }}
        <span
          *ngIf="selectedCategory === category"
          class="absolute left-0 right-0 -bottom-px h-0.5 bg-black"
        ></span>
      </button>
    </div>
    <div class="flex justify-between items-center text-base text-gray-600">
      <p>
        Showing
        <span class="font-medium text-gray-900">
          {{ filteredProducts.length }}
        </span>
        products
      </p>
      <div class="flex items-center gap-3">
        <span>Sort by</span>
        <select
          class="px-4 py-2 border rounded-md bg-white text-sm focus:outline-none focus:ring-2 focus:ring-black"
        >
          <option>Featured</option>
          <option>Newest</option>
          <option>Price: Low to High</option>
          <option>Price: High to Low</option>
        </select>
      </div>
    </div>
  </div>
  <div *ngIf="loading" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8">
    <div *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]" class="animate-pulse">
      <div class="bg-gray-200 rounded-lg aspect-[3/4] mb-4"></div>
      <div class="h-4 bg-gray-200 rounded w-3/4 mb-2"></div>
      <div class="h-4 bg-gray-200 rounded w-1/2"></div>
    </div>
  </div>
  <div
    *ngIf="error && !loading"
    class="bg-red-50 border border-red-200 text-red-700 px-5 py-4 rounded-lg mb-10"
  >
    <strong>Error:</strong> {{ error }}
  </div>
  <div class="bg-white py-6">
    <div
      *ngIf="!loading && !error && filteredProducts.length > 0"
      class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-8"
    >
      <app-product-card
        *ngFor="let product of filteredProducts"
        [product]="product"
      ></app-product-card>
    </div>
  </div>
  <div *ngIf="!loading && !error && filteredProducts.length === 0" class="text-center py-24">
    <p class="text-lg font-medium text-gray-800">No products found</p>
    <p class="text-sm text-gray-500 mt-2">Try adjusting your search or filter.</p>
  </div>
  <div *ngIf="totalCount > pageSize" class="flex justify-center items-center mt-14 gap-2">
    <button
      (click)="changePage(currentPage - 1)"
      [disabled]="currentPage === 1"
      class="px-4 py-2 border rounded-md text-sm transition"
      [class.opacity-40]="currentPage === 1"
    >
      Prev
    </button>

    <button
      *ngFor="let page of totalPagesArray"
      (click)="changePage(page)"
      class="px-4 py-2 border rounded-md text-sm transition"
      [class.bg-black]="currentPage === page"
      [class.text-white]="currentPage === page"
      [class.border-black]="currentPage === page"
      [class.hover:bg-gray-100]="currentPage !== page"
    >
      {{ page }}
    </button>

    <button
      (click)="changePage(currentPage + 1)"
      [disabled]="currentPage === totalPages"
      class="px-4 py-2 border rounded-md text-sm transition"
      [class.opacity-40]="currentPage === totalPages"
    >
      Next
    </button>
  </div>
</div>
